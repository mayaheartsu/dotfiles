# __          ___           _                 _____       _           
# \ \        / (_)         | |               |  __ \     | |          
#  \ \  /\  / / _ _ __   __| | _____      __ | |__) |   _| | ___  ___ 
#   \ \/  \/ / | | '_ \ / _` |/ _ \ \ /\ / / |  _  / | | | |/ _ \/ __|
#    \  /\  /  | | | | | (_| | (_) \ V  V /  | | \ \ |_| | |  __/\__ \
#     \/  \/   |_|_| |_|\__,_|\___/ \_/\_/   |_|  \_\__,_|_|\___||___/

layerrule = blur on, match:namespace waybar

# Float Necessary Windows
#windowrule = float, Rofi
windowrule = float on, match:class ^(org.pulseaudio.pavucontrol)$
windowrule = float on, match:class ^()$, match:title ^(Picture in picture)$vv
windowrule = float on, match:class ^(brave)$, match:title ^(Save File)$
windowrule = float on, match:class ^(brave)$, match:title ^(Open File)$
windowrule = float on, match:class ^(LibreWolf)$, match:title ^(Picture-in-Picture)$
windowrule = float on, match:class ^(Firefox)$, match:title ^(Picture-in-Picture)$
windowrule = float on, match:class ^(blueman-manager)$
windowrule = float on, match:class ^(org.twosheds.iwgtk)$
windowrule = float on, match:class ^(blueberry.py)$
windowrule = float on, match:class ^(xdg-desktop-portal-gtk)$
windowrule = float on, match:class ^(geeqie)$
windowrule = float on, match:class ^(mpv)$
windowrule = float on, match:class ^(file-roller)$
windowrule = float on, match:class ^(polkit-kde-authentication-agent)$
windowrule = float on, size 1600 900, center on, match:class ^(nemo)$

# Clipse clipboard manager
windowrule = float on, size 622 652, stay_focused on, match:class ^(clipse)$

# No  Screenshare
windowrule = no_screen_share on, match:class ^(Bitwarden)$

# Gaming Window Rules
$steamAppClass = ^steam_app(_\d+|default)?$

# Content Types
windowrule = match:xdgTag ^(proton-game)$,              tag +video-game
windowrule = match:content 3,                            tag +video-game
windowrule = match:initial_class $steamAppClass,         tag +video-game
windowrule = match:initial_class ^(.*\.exe)$,            tag +video-game
# just add the names of modpacks
windowrule = match:initial_title ^(Minecraft|Tekxit).*$, tag +video-game
windowrule = match:initial_class ^(artofrally).*$,       tag +video-game

# default monitors for wayland-native proton games controlled by steam launch parameter - this is important and ensures they are assigned to the correct display and workspace

$gamingWorkspace = 5
workspace = $gamingWorkspace, #defaultName:game,

windowrule {
    name = video-games
    match:tag = video-game
    workspace = $gamingWorkspace

    border_size = 0
    # ironic; even if they're tagged, they STILL might not have the right content type, so set it here too
    content = game
    decorate = false
    force_rgbx = true
    fullscreen = true
    immediate = on
    monitor = DP-1
    # using 2 2 doesn't work for some games *cough* ELDEN RING
    fullscreen_state = 3 3
    idle_inhibit = always
    no_anim = true
    no_blur = true
    no_dim = true
    no_max_size = true
    no_shadow = true
    persistent_size = true
    pseudo = true
    render_unfocused = true
    rounding = 0
    # fixes games that fail to maximize *cough* ELDEN RING
    sync_fullscreen = true
}

# Steam
windowrule = float on, match:class ^(steam)$ # makes all steam client windows float (useful for update news & friends list)
windowrule = tile on, match:class ^(steam)$, match:title (Steam)$ # makes steam client override the float and be tiled.
windowrule = size 280 800, match:title ^(Friends List)$

# XWayland screensharing
windowrule = opacity 0.0 override, no_anim on, no_initial_focus on, max_size 1 1, no_blur on, no_focus on, match:class ^(xwaylandvideobridge)$

# Smart gaps - https://wiki.hyprland.org/Configuring/Workspace-Rules/#smart-gaps
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrule = border_size 0, match:float 0, match:workspace w[tv1]
windowrule = rounding 0, match:float 0, match:workspace w[tv1]
windowrule = border_size 0, match:float 0, match:workspace f[1]
windowrule = rounding 0, match:float 0, match:workspace f[1]
